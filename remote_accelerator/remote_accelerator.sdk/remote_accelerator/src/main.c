/******************************************************************************
*
* Copyright (C) 2020 Carlos Pantelides
*
* dual_serial.c: simple test application
*
*/


#include "xparameters.h"
#include "xstatus.h"
#include "xuartlite_l.h"
#include "xil_printf.h"

#define UARTLITE_BASEADDR_0        XPAR_UARTLITE_0_BASEADDR

int main(void) {

    u8 data ='x';
    xil_printf("start\r\n");
    XUartLite_SendByte(UARTLITE_BASEADDR_0, data);

    while (1) {
        data =  XUartLite_RecvByte(UARTLITE_BASEADDR_0);
        data ^= 3;
        XUartLite_SendByte(UARTLITE_BASEADDR_0, data);
        xil_printf("Echoing and bridging %c\r\n", data);
    }

    return 0;
}
