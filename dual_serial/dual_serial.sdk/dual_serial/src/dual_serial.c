/******************************************************************************
*
* Copyright (C) 2020 Carlos Pantelides
*
* dual_serial.c: simple test application
*
*/


#include "xparameters.h"
#include "xstatus.h"
#include "xuartlite_l.h"
#include "xil_printf.h"


#define UARTLITE_BASEADDR_0        XPAR_UARTLITE_0_BASEADDR
#define UARTLITE_BASEADDR_1        XPAR_UARTLITE_1_BASEADDR

int main(void)
{

    u8 data ='0';
    xil_printf("start\r\n");
    XUartLite_SendByte(UARTLITE_BASEADDR_0, data);
    data = '1';
    XUartLite_SendByte(UARTLITE_BASEADDR_1, data);


    while (1) {
        data =  XUartLite_RecvByte(UARTLITE_BASEADDR_0);
        XUartLite_SendByte(UARTLITE_BASEADDR_0, data);
        XUartLite_SendByte(UARTLITE_BASEADDR_0, data + 1);
        XUartLite_SendByte(UARTLITE_BASEADDR_1, data);
        XUartLite_SendByte(UARTLITE_BASEADDR_1, data + 1);
        XUartLite_SendByte(UARTLITE_BASEADDR_1, data + 2);
        xil_printf("Echoing and bridging %c\r\n", data);
    }

    return 0;
}
